<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>LaFly RS7 — Owner Portal</title>

    <style>
        :root {
            --eu-blue: #0b1e63;
            --eu-dark: #071437;
            --eu-yellow: #ffd22e;
            --eu-light: #b5c6ff;
            --card-bg: #0d1a4f;
            --panel-bg: #0d1a4f;
        }

        /* полностью блокируем выделение */
        .secure-on * {
            -webkit-user-select: none !important;
            user-select: none !important;
        }

        /* фикс от сохранения изображений */
        img {
            -webkit-user-drag: none;
            user-drag: none;
        }

        /* предотвращаем копирование */
        ::selection {
            background: transparent;
        }

        html,
        body {
            height: 100%;
        }

        body {
            margin: 0;
            background: var(--eu-dark);
            color: #e9ebff;
            font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial, sans-serif;
            scroll-behavior: smooth;
        }

        /* secure mode */
        body.secure-on {
            -webkit-user-select: none;
            user-select: none;
        }

        /* FIXED TOP MENU */
        header {
            width: 98%;
            position: fixed;
            top: 0;
            left: 0;
            z-index: 9999;
            background: linear-gradient(90deg, var(--eu-blue), #09204f);
            padding: 12px 16px;
            padding-right: 16px;
            box-shadow: 0 6px 16px rgba(0, 0, 0, 0.45);
            display: flex;
            align-items: center;
            justify-content: space-between;
            border-bottom: 3px solid var(--eu-yellow);
        }

        header .left {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        header img.logo {
            width: 140px;
            height: auto;
            display: block;
        }

        header img.eu-flag {
            width: 44px;
            height: auto;
            border-radius: 6px;
        }

        header .title {
            color: var(--eu-light);
            font-weight: 700;
            font-size: 30px;
            padding-left: 50px;
        }

        .page-wrapper {
            padding-top: 92px;
            padding-bottom: 84px;
            width: 94%;
            max-width: 1100px;
            margin: 0 auto;
        }

        .cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
            gap: 18px;
            margin: 18px 0 28px 0;
        }

        .card {
            background: linear-gradient(180deg, rgba(255, 255, 255, 0.02), rgba(255, 255, 255, 0.01));
            border: 1px solid rgba(255, 210, 46, 0.08);
            border-radius: 12px;
            padding: 14px;
            cursor: pointer;
            transition: transform .28s cubic-bezier(.2, .9, .3, 1), box-shadow .28s;
            box-shadow: 0 6px 18px rgba(2, 6, 23, 0.45);
            display: flex;
            flex-direction: column;
            gap: 8px;
            opacity: 0;
            transform: translateY(28px);
            overflow: hidden;
        }

        .card.visible {
            opacity: 1;
            transform: none;
        }

        .card:hover {
            transform: translateY(-8px);
            box-shadow: 0 18px 36px rgba(2, 6, 23, 0.6);
        }

        /* NEW: preview-wrapper ensures full-cover images and fixed aspect-ratio (square) */
        .preview-wrapper {
            width: 100%;
            aspect-ratio: 1 / 1;
            /* square. Change to 16/9 or other if you prefer */
            overflow: hidden;
            border-radius: 8px;
            flex: 0 0 auto;
            /* keep image area fixed size in card layout */
            background: linear-gradient(180deg, rgba(0, 0, 0, 0.08), rgba(0, 0, 0, 0.03));
        }

        /* ensure images actually cover the preview wrapper */
        .preview-wrapper img {
            width: 100%;
            height: 100%;
            /* <-- вот эта строка исправляет заполнение */
            object-position: center;
            display: block;
            -webkit-user-drag: none;
            user-drag: none;
            -webkit-touch-callout: none;
        }


        .card-title {
            color: var(--eu-yellow);
            font-weight: 700;
            font-size: 18px;
        }

        .card-desc {
            color: #c9d3ff;
            font-size: 13px;
        }

        .detail-panel {
            background: var(--card-bg);
            border-radius: 12px;
            padding: 18px;
            border: 1px solid rgba(255, 210, 46, 0.2);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.55);
            display: none;
        }

        iframe.pdf-viewer {
            width: 100%;
            height: 100vh;
            border-radius: 10px;
            border: 0;
        }

        footer {
            text-align: center;
            color: #b6c6ff;
            margin-top: 22px;
            font-size: 13px;
        }

        /* bottom menu */
        .bottom-menu {
            position: fixed;
            left: 0;
            right: 0;
            bottom: 0;
            z-index: 9998;
            display: flex;
            justify-content: space-around;
            align-items: center;
            padding: 10px 12px;
            background: linear-gradient(180deg, var(--eu-blue), #041039);
            border-top: 3px solid var(--eu-yellow);
            box-shadow: 0 -8px 26px rgba(0, 0, 0, 0.5);
        }

        .bottom-menu button {
            background: transparent;
            border: none;
            color: #fff;
            font-weight: 600;
            padding: 8px 12px;
            border-radius: 10px;
        }

        .bottom-menu button:active {
            transform: scale(.98);
        }

        /* responsive tweaks */
        @media (max-width:720px) {
            .card .preview-wrapper {
                aspect-ratio: 4 / 3;
                /* make a bit more rectangular on small screens if you prefer */
            }

            header img.logo {
                width: 110px;
            }

            header .title {
                display: none;
            }
        }

        body {
            background: var(--eu-dark) !important;
        }

        .page-wrapper {
            background: var(--eu-dark) !important;
        }

        .card {
            background: var(--card-bg) !important;
        }

        .detail-panel {
            background: var(--card-bg) !important;
        }
    </style>
</head>

<body>

    <header>
        <div class="left">
            <img class="logo" src="images/Logo_de_LAFLY.png" alt="LaFly logo">
            <div class="title">LaFly RS7 — Owner Portal</div>
        </div>
        <div class="right" style="display:flex;align-items:center;gap:12px;">
            <select id="lang-switch"
                style="padding:6px 8px;border-radius:6px;background:#09204f;color:white;border:1px solid var(--eu-yellow);font-weight:600;">
                <option value="en">EN</option>
                <option value="es">ES</option>
            </select>
            <img class="eu-flag" src="images/flag.jpg" alt="EU flag">
        </div>
    </header>

    <main class="page-wrapper">
        <div class="cards" id="cards">
            <div class="card" data-key="pdf">
                <div class="preview-wrapper">
                    <img src="images/profil.jpg" alt="PDF preview">
                </div>
                <div class="card-title">Full Owner PDF</div>
                <div class="card-desc">Open the merged owner dossier (PDF) with Revolut proof and photos.</div>
            </div>

            <div class="card" data-key="insurance">
                <div class="preview-wrapper">
                    <img src="images/accident.jpg" alt="Insurance preview">
                </div>
                <div class="card-title">Insurance Policy</div>
                <div class="card-desc">Official insurance (add when ready).</div>
            </div>

            <div class="card" data-key="gallery">
                <div class="preview-wrapper">
                    <img src="images/gallery.jpg" alt="Gallery preview">
                </div>
                <div class="card-title">Scooter Photos</div>
                <div class="card-desc">Photos of the LaFly RS7 — exterior, deck, serial details.</div>
            </div>

            <div class="card" data-key="specs">
                <div class="preview-wrapper">
                    <img src="images/insurance.jpg" alt="Specs preview">
                </div>
                <div class="card-title">Technical Specs</div>
                <div class="card-desc">Motors, battery, brakes, suspension, lights and weight.</div>
            </div>
        </div>

        <section id="panel" class="detail-panel" aria-live="polite"></section>

        <footer>Version: 2.1 · Generated: 2023-12-05 · LaFly RS7 Owner Portal</footer>
    </main>

    <div class="bottom-menu" role="navigation">
        <button id="btn-home">Home</button>
        <button id="btn-pdf">PDF</button>
        <button id="btn-specs">Specs</button>
    </div>

    <script>
        /* ---------- Language dictionary & apply function ---------- */
        const LANG = {
            en: {
                title: "LaFly RS7 — Owner Portal",
                pdf_title: "Full Owner PDF",
                pdf_desc: "Open the merged owner dossier (PDF) with Revolut proof and photos.",
                insurance_title: "Insurance Policy",
                insurance_desc: "Official insurance (add when ready).",
                gallery_title: "Scooter Photos",
                gallery_desc: "Photos of the LaFly RS7 — exterior, deck, serial details.",
                specs_title: "Technical Specs",
                specs_desc: "Motors, battery, brakes, suspension, lights and weight.",

                specs_panel_title: "Technical Specifications — LaFly RS7",
                t_motors: "Motors:",
                t_motors_val: "Dual hub motors, 1000W × 2",
                t_load: "Maximum load:",
                t_load_val: "250 kg",
                t_battery: "Battery:",
                t_battery_val: "52V · 38Ah Li-Ion",
                t_controller: "Controller:",
                t_controller_val: "Dual 45A Sine Wave",
                t_brakes: "Brakes:",
                t_brakes_val: "Hydraulic disc (F+R)",
                t_suspension: "Suspension:",
                t_suspension_val: "Oil front + rear",
                t_speed: "Max speed:",
                t_speed_val: "~30 km/h",
                t_weight: "Weight:",
                t_weight_val: "~37 kg",
                t_lighting: "Lighting:",
                t_lighting_val: "Direction indicator + taillight. Full LED package"
            },

            es: {
                title: "LaFly RS7 — Portal del Propietario",
                pdf_title: "PDF Completo del Propietario",
                pdf_desc: "Abra el expediente completo del propietario (PDF) con comprobante Revolut y fotos.",
                insurance_title: "Póliza de Seguro",
                insurance_desc: "Seguro oficial (se añadirá cuando esté disponible).",
                gallery_title: "Fotos del Patinete",
                gallery_desc: "Fotos del LaFly RS7 — exterior, plataforma, número de serie.",
                specs_title: "Especificaciones Técnicas",
                specs_desc: "Motores, batería, frenos, suspensión, luces y peso.",

                specs_panel_title: "Especificaciones Técnicas — LaFly RS7",
                t_motors: "Motores:",
                t_motors_val: "Motores duales de buje, 1000W × 2",
                t_load: "Carga máxima:",
                t_load_val: "250 kg",
                t_battery: "Batería:",
                t_battery_val: "52V · 38Ah Li-Ion",
                t_controller: "Controlador:",
                t_controller_val: "Doble 45A Sine Wave",
                t_brakes: "Frenos:",
                t_brakes_val: "Disco hidráulico (Del + Tras)",
                t_suspension: "Suspensión:",
                t_suspension_val: "Aceite delantera + trasera",
                t_speed: "Velocidad máx:",
                t_speed_val: "~30 km/h",
                t_weight: "Peso:",
                t_weight_val: "~37 kg",
                t_lighting: "Iluminación:",
                t_lighting_val: "Intermitentes + luz trasera. Paquete LED completo"
            }
        };

        /* APPLY LANGUAGE TO CARDS AND HEADER */
        function applyLanguage(lang) {
            const t = LANG[lang];
            // header
            document.querySelector("header .title").textContent = t.title;
            // cards
            const cards = [
                ["pdf", "pdf_title", "pdf_desc"],
                ["insurance", "insurance_title", "insurance_desc"],
                ["gallery", "gallery_title", "gallery_desc"],
                ["specs", "specs_title", "specs_desc"]
            ];

            cards.forEach(([key, titleKey, descKey]) => {
                const card = document.querySelector(`.card[data-key="${key}"]`);
                if (!card) return;
                card.querySelector(".card-title").textContent = t[titleKey];
                card.querySelector(".card-desc").textContent = t[descKey];
            });
        }

        /* ---------- UI handlers & DOM ready ---------- */
        window.addEventListener('DOMContentLoaded', () => {
            const cards = document.querySelectorAll('.card');
            cards.forEach((c, i) => {
                setTimeout(() => c.classList.add('visible'), 80 * i);
                c.addEventListener('click', () => window.openPanel(c.dataset.key));
            });

            document.getElementById('btn-home').onclick = () => window.scrollToTop();
            document.getElementById('btn-pdf').onclick = () => window.openPanel('pdf');
            document.getElementById('btn-specs').onclick = () => window.openPanel('specs');

            const langSelect = document.getElementById('lang-switch');
            if (langSelect) {
                // set default language ON LOAD (only once)
                applyLanguage(langSelect.value || 'en');

                // when user changes language, apply selected language only
                langSelect.addEventListener('change', (e) => {
                    const lang = e.target.value;
                    applyLanguage(lang);

                    // если панель уже открыта — переотрисовать её
                    const panel = document.getElementById("panel");
                    if (panel.style.display === "block") {
                        const active = panel.getAttribute("data-active");
                        if (active) {
                            window.openPanel(active); // заново открыть панель на новом языке
                        }
                    }
                });
            }
        });

        /* ---------- Scroll function ---------- */
        window.scrollToTop = () => window.scrollTo({ top: 0, behavior: 'smooth' });

        /* ---------- Panel opener (as before) ---------- */
        window.openPanel = function (type) {
            const lang = document.getElementById("lang-switch").value;
            const pdfFile = lang === "es" ? "pdf/RS7_OwnerInfo_ES.pdf" : "pdf/RS7_OwnerInfo_EN.pdf";
            const t = LANG[lang];

            const panel = document.getElementById("panel");
            let html = "";

            if (type === "pdf") {
                html = `
            <h2 style="color:var(--eu-yellow);margin-top:0">${t.pdf_title}</h2>
            <iframe class="pdf-viewer" src="${pdfFile}"></iframe>
        `;
            }

            if (type === "insurance") {
                html = `
            <h2 style="color:var(--eu-yellow);margin-top:0">${t.insurance_title}</h2>
            <p class="card-desc">${t.insurance_desc}</p>
        `;
            }

            if (type === "gallery") {
                html = `
            <h2 style="color:var(--eu-yellow);margin-top:0">${t.gallery_title}</h2>
            <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:10px;">
                <img src="images/patinete.png" style="width:100%;border-radius:8px;" />
                <img src="images/patinete.png" style="width:100%;border-radius:8px;" />
                <img src="images/patinete.png" style="width:100%;border-radius:8px;" />
            </div>
        `;
            }

            if (type === "specs") {
                html = `
        <h2 style="color:var(--eu-yellow);margin-top:0">${t.specs_panel_title}</h2>
        <table style="width:100%;margin-top:10px;color:#cfe0ff">
            <tr><td>${t.t_motors}</td><td>${t.t_motors_val}</td></tr>
            <tr><td>${t.t_load}</td><td>${t.t_load_val}</td></tr>
            <tr><td>${t.t_battery}</td><td>${t.t_battery_val}</td></tr>
            <tr><td>${t.t_controller}</td><td>${t.t_controller_val}</td></tr>
            <tr><td>${t.t_brakes}</td><td>${t.t_brakes_val}</td></tr>
            <tr><td>${t.t_suspension}</td><td>${t.t_suspension_val}</td></tr>
            <tr><td>${t.t_speed}</td><td>${t.t_speed_val}</td></tr>
            <tr><td>${t.t_weight}</td><td>${t.t_weight_val}</td></tr>
            <tr><td>${t.t_lighting}</td><td>${t.t_lighting_val}</td></tr>
        </table>`;
            }

            panel.innerHTML = html;
            panel.style.display = "block";
            panel.setAttribute("data-active", type); // сохраняем активную панель
            setTimeout(() => panel.scrollIntoView({ behavior: "smooth" }), 50);
        };

        /* ---------- Improved secureMode with safe interval handling ---------- */
        let _secureIntervalId = null;
        function secureMode(enable = true) {
            const body = document.body;

            if (enable) {
                body.classList.add("secure-on");
                body.style.userSelect = "none";
                body.style.webkitUserSelect = "none";

                document.addEventListener("contextmenu", _blockContext);
                document.addEventListener("dragstart", _blockDrag);
                document.addEventListener("keydown", _blockKeys);

                // try to clear clipboard less often (every 2s) to avoid permission spam
                if (!_secureIntervalId) {
                    try {
                        _secureIntervalId = setInterval(() => {
                            // navigator.clipboard might be blocked without user gesture -> catch
                            navigator.clipboard && navigator.clipboard.writeText && navigator.clipboard.writeText("");
                        }, 2000);
                    } catch (e) {
                        // ignore
                    }
                }

                createAntiScreenshotOverlay();
            } else {
                body.classList.remove("secure-on");
                body.style.userSelect = "auto";

                document.removeEventListener("contextmenu", _blockContext);
                document.removeEventListener("dragstart", _blockDrag);
                document.removeEventListener("keydown", _blockKeys);

                if (_secureIntervalId) {
                    clearInterval(_secureIntervalId);
                    _secureIntervalId = null;
                }

                const overlay = document.getElementById("antiScreenshotLayer");
                if (overlay) overlay.remove();
            }
        }

        function _blockContext(e) { e.preventDefault(); }
        function _blockDrag(e) { e.preventDefault(); }
        function _blockKeys(e) {
            if (
                e.key === "F12" ||
                (e.ctrlKey && e.shiftKey && ["I", "C", "J"].includes(e.key.toUpperCase())) ||
                (e.ctrlKey && e.key.toLowerCase() === "u")
            ) {
                e.preventDefault();
                e.stopPropagation();
                console.warn("DevTools Blocked");
            }
            if (e.key === "PrintScreen") {
                try { navigator.clipboard && navigator.clipboard.writeText && navigator.clipboard.writeText(""); } catch (e) { }
                alert("Screenshots are blocked for security reasons.");
                e.preventDefault();
                e.stopPropagation();
            }
        }

        function createAntiScreenshotOverlay() {
            if (document.getElementById("antiScreenshotLayer")) return;
            let overlay = document.createElement("div");
            overlay.id = "antiScreenshotLayer";
            Object.assign(overlay.style, {
                position: "fixed",
                inset: "0",
                pointerEvents: "none",
                zIndex: "999999",
                backdropFilter: "brightness(1.00) contrast(1.00)",
                background: "rgba(255,255,255,0.015) repeating-linear-gradient(45deg, rgba(255,255,255,0.04), rgba(255,255,255,0.04) 2px, transparent 2px, transparent 4px)"
            });
            document.body.appendChild(overlay);
        }

        /* start in secure mode? you can switch to false while testing */
        secureMode(true);
    </script>
</body>

</html>
